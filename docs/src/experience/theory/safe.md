---
title: 安全
description: 安全
---

# 安全面试题

## cookie和token的区别

Cookie和Token是两种不同的认证和会话管理机制，以下是它们的主要区别：

* 存储位置：

  * Cookie：由服务器生成并存储在客户端浏览器中，每次请求都会自动包含在HTTP请求头中。
  * Token：通常存储在客户端的本地存储或会话存储中，需要手动包含在请求头中。

* 使用方式：

  * Cookie：用于传统的会话管理，服务器生成Session ID并通过Cookie发送给客户端，每次请求时浏览器会自动发送Cookie。
  * Token：通常为JWT（JSON Web Token），是一种自包含的、携带认证信息的字符串，客户端需要在每次请求中手动添加Token到请求头中。

* 安全性：

  * Cookie：容易受到CSRF（跨站请求伪造）攻击，因为浏览器会自动发送Cookie。可以通过设置HttpOnly标志减少XSS（跨站脚本）攻击的风险。
  * Token：因为浏览器不会自动发送Token，可以减少CSRF攻击的风险。Token通常是签名的，确保数据的完整性和真实性。

* 扩展性和标准化：

  * Cookie：基于RFC 6265标准，广泛支持并经过充分测试。
  * Token：如JWT，基于RFC 7519标准，可以跨多种系统和服务使用，具有更高的灵活性和可扩展性。

* 服务器端状态：

  * Cookie：服务器需要保存Session数据，与Session ID对应，增加了服务器的存储和管理负担。
  * Token：服务器不需要保存会话数据，所有信息都包含在Token中，便于水平扩展。

## 如何实现 token 加密

JWT 举例

* 需要一个secret（随机数）

* 后端利用secret和加密算法(如：HMAC-SHA256)对payload(如账号密码)生成一个字符串(token)，返回前端

* 前端每次request在header中带上token

* 后端用同样的算法解密

## 介绍下 HTTPS 中间人攻击

https协议由 http + ssl 协议构成。

中间人攻击过程如下：

* 服务器向客户端发送公钥

* 攻击者截获公钥，保留在自己手上

* 然后攻击者自己生成一个【伪造的】公钥，发给客户端

* 客户端收到伪造的公钥后，生成加密hash值发给服务器

* 攻击者获得加密hash值，用自己的私钥解密获得真秘钥

* 同时生成假的加密hash值，发给服务器

* 服务器用私钥解密获得假秘钥

* 服务器用加秘钥加密传输信息

防范方法：

* 客户端必须严格验证服务器的证书，确认其来自可信的证书颁发机构（CA）。

* 使用强制HTTPS策略（HSTS）确保所有通信都通过HTTPS进行，并防止降级攻击。

* 定期更新和检查浏览器中的根证书，确保没有被不可信的证书颁发机构滥用。

## 介绍下前端加密的常见场景和方法

在前端开发中，常见的加密场景和方法主要包括以下几种：

* 数据传输加密：前后端通信时，使用 HTTPS 是最基础的加密方法。它通过 SSL/TLS 协议确保数据在传输过程中的机密性和完整性。几乎所有的现代网络应用都应该使用 HTTPS 来保护数据传输​。

* 敏感数据加密：在前端存储或处理用户敏感信息时，可以使用如 CryptoJS 或 Web Cryptography API 进行加密。这些库可以帮助你在客户端加密数据，例如加密用户输入的密码或其他敏感信息​。

* 密码处理：密码通常不直接存储，而是使用哈希算法（如 bcrypt）进行哈希处理。虽然哈希主要在服务器端进行，但也可以在前端进行哈希处理，然后将哈希值发送到服务器​。

* JSON Web Token (JWT) 签名：JWT 常用于前后端分离的认证场景。前端可以使用 JWT 进行数据签名，以确保数据在传输中的完整性。Web Cryptography API 可以生成密钥对，用于对 JWT 进行签名和验证​。
